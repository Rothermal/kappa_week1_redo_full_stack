function init(){grabEmployeeArray(),enable()}function enable(){$(".empContainer").on("click",".delete",deleteEmployee),$(".get-random-char").on("click",randomCharacter),$(".get-random-comic").on("click",randomComic),$(".get-random-series").on("click",randomSeries),$(".empty-display").on("click",emptyDisplay),$("#employee-form").on("submit",processForm)}function deleteEmployee(){removeFromPayroll($(this).parent().data().data),$(this).parent().remove()}function processForm(a){a.preventDefault();var b={};$.each($("#employee-form").serializeArray(),function(a,c){b[c.name]=c.value}),console.log(b),postEmployees(b),employeeArray.push(b),$("#employee-form").find("input[type=text],input[type=number]").val(""),calcMonthlyPayroll(employeeArray)}function calcMonthlyPayroll(a){total=0;for(var b=0;b<a.length;b++)a[b].employee_salary&&(total+=Math.round(parseInt(a[b].employee_salary)/12));$(".total-monthly-salary").html("Current Monthly Payroll is : $"+total)}function removeFromPayroll(a){console.log(a);for(var b=0;b<employeeArray.length;b++)a==employeeArray[b].key&&(employeeArray.splice(b,1),calcMonthlyPayroll(employeeArray))}function marvel(a){var b=a.employee_title;$.ajax({type:"GET",url:"/employees/"+b,success:function(b){console.log(b),results=b.data.results,results.length>0?(randomNum=randomNumber(0,results.length-1),marvelApiImage=results[randomNum].thumbnail.path+"/standard_xlarge.jpg",marvelCharId=results[randomNum].id,marvelApiDescription=results[randomNum].description.length>0?results[randomNum].description:"No Back Story Available "):(marvelApiImage="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available/standard_xlarge.jpg",marvelApiDescription="No Back Story Available "),a.image=marvelApiImage,a.description=marvelApiDescription,a.employeeId=marvelCharId,marvelArray.push(b),AppendDom(a)}})}function randomNumber(a,b){return Math.floor(Math.random()*(1+b-a)+a)}function randomCharacter(){var a={};$.ajax({type:"GET",url:"/characters",success:function(b){console.log(b),results=b.data.results,results.length>0?(randomNum=randomNumber(0,results.length-1),marvelApiImage=results[randomNum].thumbnail.path+"/standard_xlarge.jpg",marvelCharId=results[randomNum].id,marvelName=results[randomNum].name,marvelApiDescription=results[randomNum].description.length>0?results[randomNum].description:"No Back Story Available "):(marvelApiImage="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available/standard_xlarge.jpg",marvelApiDescription="No Back Story Available "),a.employee_title=marvelName,a.image=marvelApiImage,a.description=marvelApiDescription,a.employee_number=marvelCharId,marvelArray.push(b),AppendDom(a)}})}function AppendDom(a){primaryKey++,a.key=primaryKey,$(".empContainer").append("<div class='well col-sm-8'></div>"),$el=$(".empContainer").children().last(),$el.data("data",a.key),$el.append("<p>Name: "+a.first_name+" "+a.last_name+"</p>"),$el.append("<p>Id #: "+a.employee_number+"</p>"),$el.append("<p>Alias: "+a.employee_title+"</p>"),$el.append("<p>Salary: "+a.employee_salary+"</p>"),$el.append('<img class="img-responsive img-circle" src='+a.image+" >"),$el.append("<p>BackStory: "+a.description+"</p>"),$el.append('<button class="btn btn-danger delete"> Remove Employee </button>')}function randomComic(){var a={};$.ajax({type:"GET",url:"/comic",success:function(b){console.log(b),employeeArray.push(b),console.log(employeeArray),results=b.data.results,results.length>0?(randomNum=randomNumber(0,results.length-1),marvelApiImage=results[randomNum].thumbnail.path+"/standard_xlarge.jpg",marvelCharId=results[randomNum].id,marvelName=results[randomNum].title,marvelApiDescription=null!==results[randomNum].description?results[randomNum].description:"No description Available ",console.log(marvelCharId)):(marvelApiImage="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available/standard_xlarge.jpg",marvelApiDescription="No description Available "),a.employeeTitle=marvelName,a.image=marvelApiImage,a.description=marvelApiDescription,a.employeeId=marvelCharId,marvelArray.push(b),AppendDomComic(a)}})}function AppendDomComic(a){primaryKey++,a.key=primaryKey,$(".empContainer").append("<div class='well col-sm-3'></div>"),$el=$(".empContainer").children().last(),$el.data("data",a.key),$el.append("<p>Id #: "+a.employeeId+"</p>"),$el.append("<p>Title: "+a.employeeTitle+"</p>"),$el.append('<img class="img-responsive " src='+a.image+" >"),$el.append("<p>Story: "+a.description+"</p>"),$el.append('<button class="btn btn-danger delete"> Remove Employee </button>')}function randomSeries(){var a={};$.ajax({type:"GET",url:"/series",success:function(b){console.log(b),results=b.data.results,results.length>0?(randomNum=randomNumber(0,results.length-1),marvelApiImage=results[randomNum].thumbnail.path+"/standard_xlarge.jpg",marvelCharId=results[randomNum].id,marvelName=results[randomNum].title,marvelApiDescription=null!==results[randomNum].description?results[randomNum].description:"No Back Story Available ",console.log(marvelCharId)):(marvelApiImage="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available/standard_xlarge.jpg",marvelApiDescription="No Back Story Available "),a.employeeTitle=marvelName,a.image=marvelApiImage,a.description=marvelApiDescription,a.employeeId=marvelCharId,marvelArray.push(b),AppendDomComic(a)}})}function grabEmployeeArray(){$.ajax({type:"GET",url:"/employees",success:function(a){console.log(a),employeeArray=a;for(var b=0;b<employeeArray.length;b++)marvel(employeeArray[b]),calcMonthlyPayroll(employeeArray)}})}function postEmployees(a){console.log(a);var b=a;$.ajax({type:"POST",url:"/employees",data:b,success:function(a){console.log(a),employeeArray=a;for(var b=0;b<employeeArray.length;b++)marvel(employeeArray[b]),calcMonthlyPayroll(employeeArray)}})}function emptyDisplay(){$(".empContainer").empty(),total=0,$(".total-monthly-salary").html("Current Monthly Payroll is : $"+total)}var employeeArray=[],total=0,primaryKey=0,randomNum=0,marvelArray=[],marvelCharId=0,marvelApiImage={},marvelApiDescription="",marvelName="",results={};$(document).ready(function(){init()}),console.log(employeeArray);